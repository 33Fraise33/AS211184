---
vrfs:
  default:  # default vrf for updates, services and were all remote sites are living
    interfaces:
      loopback:
        ipv6:
          addresses:
            - 2001:678:1080::1/128
        ipv4:
          addresses:
            - 10.48.0.1/32
      veth:
        - name: vthDefault
          peer: vthPubDef
          ipv6:
      wireguards: 
        - name: wgBEJBEGIA
          description: "WG Transit to Home"
          mtu: 1420
          wg:
            port: 51820
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              63616535666438383734333030623561343666303862303037383033643962353261343436333964
              3532356662376438383237353365343932336534653661350a326566616335376336393636623763
              61663033616437313639643037346132373662333034653166633533623134383433656437363130
              6631343538313933330a343031616537356561633333376264643663653635646337313831343537
              30353465396264313635613565373561343232336264616137633238346436626537666234376237
              3964633339306534343932306535663932363533663961656233
            public_key: f3d1Gf0TWECoV2mlgVSEens9nRjWQNuq26oH6qq56Vw=
            peers:
              - name: BEJBEGIART01
                public_key: yPCXl5esPr8AnhjjfaQvlHTKd2seHzkIF1Ga06N8MCs=
          ipv6:
            addresses:
              - 2001:678:1080:101::1:1/112
              - fe80:3:34::1:1/64
        - name: wgBELPMMOM
          description: "WG Transit to MOM"
          mtu: 1420
          wg:
            port: 51821
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              37393265653834313137636263613566613734663730666236363437663865386535316638343436
              3938383464376465313962663735653234356434643535620a333562333261306433313266326164
              39333633633763656634646635366430376262306664333536393130373930646330353965303235
              3838376330323832330a646535653735616438343036363962653735383663643133613430326366
              61343665323665616533383866346362373534393338633931383066373366326337393364633063
              3537303362626231336566303866393565393366313630353139
            public_key: AT8EI+D8hCr6pn5jY7FeEeDTLRbr7vEPSPWYpE7fT0U=
            peers:
              - name: BELPMMOMRT01
                public_key: hGCG48gXMEi2Kf8KXbWA+LppaSGyHaZkqtjHkGGbvxo=
                private_key: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  31333632386264363262366439663463393337333836356531386235626539383266623164346561
                  6131643537666333623937616164336536653661616130370a643561353036373931663834303364
                  65366462386339396465383731326131393234373436626361326438396133386262636636626335
                  6335646432366234390a353937326633646334333739363734623161663432316637306634336431
                  62643138613864363066613036386533366439643162353064313239383539343065313662373633
                  3166333334396330666634393935623737356533363038383337
          ipv6:
            addresses:
              - 2001:678:1080:101::2:1/112
              - fe80:34::2:1/64
          ipv4:
            addresses:
              - 10.10.49.5/30
        - name: wgBEOKPDCO
          description: "WG Transit to DCO"
          mtu: 1420
          wg:
            port: 51822
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              31393063333464393231323637643639666237613530303436386632333663313231646236336165
              3366663561353936343263653233663662653431363664340a396236396335363636646432636330
              34646638326466666462383038656361373661323731393766323239303930303666336532383663
              3637643032366631390a366538336566333930303534353339633431623031393765363930346166
              63653832626430316661656332376561656134393534363663643433333737656435636264346263
              3337636432666236306532626538616366643239616261623437
            public_key: zOjpUNpdB0SCsBmDKAtsiU+gK5E60ncvFH2axdelXS8=
            peers:
              - name: BEOKPDCORT01
                public_key: /If1/C6nzTbkCGvGbgEGnuQNAoQUIYiP0Vk3jx54M2s=
          ipv6:
            addresses:
              - 2001:678:1080:101::3:1/112
              - fe80:34::3:1/64
        - name: wgBELPMDAD
          description: "WG Transit to Dad"
          mtu: 1420
          wg:
            port: 51823
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              39343030336139323465323736343362633737643531656664386538333137313861333033366566
              6336373733616661666634376235313437623433646438300a316235356363633639383337393736
              36356630643866396439323766633036373966653961376338383031363739653930316538396562
              3164386436343563310a376639373565303733356538663138353132326138343462616138646537
              36376666643638373362663534613363336566633663613965346534356461336633346637323533
              3030636534653063623864376164306637336134336238623533
            public_key: 5cJh0US/ol176fPNJ4Auzd9qU+nOyH6lXbs59kF1xns=
            peers:
              - name: BELPMDADRT01
                public_key: sncn3P0nYLKwxwzGMktyD5qNqYnzB45Zg9vP+v2EpVI=
          ipv6:
            addresses:
              - 2001:678:1080:101::4:1/112
              - fe80:34::4:1/64
          ipv4:
            addresses:
              - 10.10.49.13/30
        - name: wgOTGKIT01
          description: "WG Transit to Unitix KIT01"
          mtu: 1420
          wg:
            port: 51824
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              32373865366137623232653264383464653031353631313833313737383036616365643338646461
              3464326238323537643037383261383035623330346630630a303162616339616366643365383937
              34626665623063623831643237356663646663356233373734313136353363643064663863353130
              6434663166383834320a326137303831303664316134366364633030353766363034646561643662
              30343036623935313166323036393935666531333730626338646666613164663136333330643737
              3439303861333065346637616132613666336630666162633734
            public_key: OZ0hJSTjJgJYm+f4wD6wBYDzDQ1aq5gJN+RvBzk/fF4=
            peers:
              - name: OTGKIT01RT01
                public_key: VWPA1c7JuTK10riRoGq40mkj4TzHsygipz5kipl5Zi8=
          ipv6:
            addresses:
              - 2001:678:1080:101::5:1/112
              - fe80:34::5:1/64
          ipv4:
            addresses:
              - 10.10.49.17/30
        - name: wgBEZEDHVN
          description: "WG Transit to t Hovenierke"
          mtu: 1420
          wg:
            port: 51825
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              31613830363738666566666532323937333231386464636232333836333733393862396135313362
              3937333237663632633830636532653330363931386530380a623366323039636362306466393638
              66626466353339323637323437386663323464376237393532383235343434613335646665323332
              3839386564396365310a306634343263303730613466346666363333333935373837613464663763
              33383462623434356139343231373139393837663636346632613239353432663363343233353836
              3930643336353032643931646538333563353730356561643264
            public_key: 5z3VGuzATwSczxx21jelVAZ8FAf75yr0q8/f7Yx6ZDg=
            peers:
              - name: BEZEDHVNRT01
                public_key: FI99BI3hkkubynYpFDYuxWJBHBQNe8R4OosgrBZcPSk=
          ipv6:
            addresses:
              - 2001:678:1080:101::6:1/112
              - fe80:34::6:1/64
          ipv4:
            addresses:
              - 10.10.49.21/30
        - name: wgBELPMPAR
          description: "WG Transit to Parys"
          mtu: 1420
          wg:
            port: 51827
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              62366261383366623434386631313763653633323263623332323961303730353138313030643339
              3664663835323539393963653938303436653165656362630a623366663932643663346137383038
              32356365323836383235396437346364623237326233376362363930353636373236353963353364
              6636633139366461350a643233663232333038303330393231363066383066643238303064353861
              36646437353035333138393433653263366435313232383234623834383031643364613535396239
              3633376535616135326137333763623063333733313436346564
            public_key: Q51kLEdIQKOb0jPYwpfUa1dYiyF006SoEYmbVFQqQ28=
            peers:
              - name: BELPMPARRT01
                public_key: 414jZEfktKGFQvf5UooON42atTYp4kq7s15sCRHUV18=
          ipv6:
            addresses:
              - 2001:678:1080:101::8:1/112
              - fe80:34::8:1/64
          ipv4:
            addresses:
              - 10.10.49.29/30
        - name: wgBELOKSTO
          description: "WG Transit to Sheila and Tom"
          mtu: 1420
          wg:
            port: 51829
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              66663038326433383436353435303433383339633331356433333035643733356133396531396337
              3736366565306637383233653234646463616231653838620a653637636339643365306530636636
              62663932336237343661346239323465626366303565313665646536386362373762636465323863
              6534373263393761340a646130656534323730396638666530366535336531343561313066656438
              64336438636239323436333735323663653666333734303231366133386433333138323066643463
              3634306365656432396538356336343033646564373336326132
            public_key: fOwoGZm8S4tLxl65yPDr+68+1iHkozsXoahqBkkNN1U=
            peers:
              - name: BELOKSTORT01
                public_key: 3TzNUQbfhVEBgRhW/5OpF5RAXKhfDyWvTT8oZbPEsQg=
          ipv6:
            addresses:
              - 2001:678:1080:101::9:1/112
              - fe80:34::9:1/64
          ipv4:
            addresses:
              - 10.10.49.33/30
        - name: wgRoadwarrior
          description: "WG Interface Road Warrior clients"
          mtu: 1420
          wg:
            port: 2034
            keepalive: 25
            private_key: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              36663332356236626537383561346534373866646232383537623465653861353965363230663437
              6264396533653661343330643036646361303037356236610a643662393234363264633837623132
              33393032623737363239663262373739633761336432376239393232386362396530373764316337
              3735383364646563330a633635346661626133636233366231306231616533303362336537663935
              36626566303832306338613532373161663463343234393561306330646263663562333530326266
              6635633962393761303364623431303839623465363131383234
            public_key: 6PvkKYx6mAg2nkDihioEY8Kz8QNwdoejoWc2cqE5pCs=
            peers:
              - name: unitix-pc05-macbook
                public_key: jqn7VCUQebPQD34Qo1+aJoMV8AcE53QNI69qY1idJ1A=
                private_key: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  65373035396634623730643064626439626364626133646161613632363930363934303732353061
                  6534366566663833623163666661643034643333343532630a643963653462663533656565633239
                  37633737363533633239326366653865336564303530373338303664306636393637616431373937
                  6566316539636332330a636163656531633739383431306333613063363839623334653137323935
                  66303531393738346432356634363436623162633266353739396538353833396339666638633434
                  6361306136666330626534323931633463373762363565313636
                allowed_ips: "10.10.35.2/32, 2001:678:1080:1033::2/128"
              - name: Unitix_Stream_PC
                public_key: eJ5/gLv4/jf5eRHcvl9aLXkvhE4rOdDVIAbb9alwtRw=
                private_key: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  36326165393065313163626631383033346162663834373533656430303863376538303537353333
                  6364613931623734336463643732633535363565643166310a323632303739646131363261653161
                  37323838376563633932653637393464663830376535353766653537356339373534303935346562
                  3366626534306166390a343766373435316432636637623161656230323530363739356463643235
                  62376137386335383762623433353639346537633164353336326261303265346239393338303664
                  6566313163333865353830316563613030393331653733366265
                allowed_ips: "10.10.35.3/32, 2001:678:1080:1033::3/128"
              - name: Fraise_Pixel
                public_key: nqbVgdCy0/XNbtq0Du4Qeu9Pse60KN7oMSgFGXg+2kk=
                private_key: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  64373964643431333130346330306561663263616462663131626636303335653639396638343562
                  6662653961643465396332326236653763393162353134350a336562616539393838343066323361
                  62323161386363313632313432373631636238383632616561393630626135626264366231653764
                  3538363764316365300a383434626563623632333532626165336634343638613535643138646334
                  66613934613664666230643761356332616564346632633031323164343266323566383533623461
                  6337663062656135613833613066376335333262616361346265
                allowed_ips: "10.10.35.4/32, 2001:678:1080:1033::4/128"
              - name: Amelle_SamsungA54
                public_key: mTgVmjhdR6+LXxLLtxEx+rH/zJWSs8K18I5Fywm06TY=
                private_key: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  33323661333164316664303764333962373532626363366537653534653339356364656338383664
                  3033376132356362613736386534636366303062303738330a636536386131363536333261386334
                  33623838646533323732323739303135623966643731666533366262313235376432386435636664
                  3164373933366163650a396436303564363139643563343333626564343238626331623966386563
                  30396164336666656534373835653164353266633231646336323936646232643034343132353233
                  3864343361383435663839613136373537393465333662383832
                allowed_ips: "10.10.35.5/32, 2001:678:1080:1033::5/128"
              - name: Fraise_Ipad
                public_key: fHeNy8erX/oFjcUk5l7lPJJxcjU0CujBYbizRwtpzAE=
                private_key: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  38653365353037626531376266663361343538333139656439383232313061663464313834333835
                  3334323237306665636462306563383465356662613563660a633036396264313764363763313265
                  31653733623966633639346663376633386335363733363262343731383839623131356239643432
                  3964316330396563630a643139613563646266336563656436343339633837353435363432313934
                  39313137653931316163623365303339343264353239336237636264643565346365633166323736
                  6562643936363264366339666432326666616236346434323030
                allowed_ips: "10.10.35.6/32, 2001:678:1080:1033::6/128"
              - name: Fraise_Steamdeck
                public_key: 6Nzp0AfxyE79Xrsbkzbt/mm931WBdSoIGBRMdELFXRg=
                private_key: !vault |
                  $ANSIBLE_VAULT;1.1;AES256
                  63323562653139393463373530613532396337383961633863636431636335393934646331353037
                  3566616636313865366461356534396339336462363437620a636337666366383738373339653338
                  37396562356665613730303337326161616162303739393133326637616233636164326633333464
                  3433616430636139380a653961353830666535616539313733373837653737396262323062323634
                  63323036366432363963666233643335323939653938323934363265363334356238303031646139
                  3333373062353535623537616166386230313331623236353339
                allowed_ips: "10.10.35.7/32, 2001:678:1080:1033::7/128"
          ipv6:
            addresses:
              - 2001:678:1080:1033::1/64
          ipv4:
            addresses:
              - 10.10.35.1/24
    routing:
      bgp:
        as: 65000
        router_id: 10.48.0.1
        redistribute:
          - connected
          - kernel
        aggregates:
          v4:
            - address: 10.48.32.0/24
          v6:
            - address: 2001:678:1080:2100::/56
        networks:
          v6:
            - 2001:678:1080::/48
        neighbor_groups:
          - peer: veth-public
            soft_reconfiguration_inbound: true
            activate:
              - v4
              - v6
            timers:
              keepalive: 3
              hold: 9
            route_maps:
              - direction: in
                name: rm-veth_from_public
              - direction: out
                name: rm-to_veth
          - peer: remotesites
            soft_reconfiguration_inbound: true
            local_as: 211184
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-REMOTE_SITES-in
              - direction: out
                name: rm-REMOTE_SITES-out
          - peer: beokpdco
            soft_reconfiguration_inbound: true
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-REMOTE_SITES-in
              - direction: out
                name: rm-DC-out
        neighbors:
          - neighbor_group: veth-public
            peer: vthDefault
            unnumbered: true
            as: 65001
            description: "veth - Public"
          - neighbor_group: beokpdco
            peer: 2001:678:1080:101::3:2
            activate:
              - v4
              - v6
            as: 65502
            description: "BEOKPDCO"
          - neighbor_group: remotesites
            peer: 2001:678:1080:101::1:2
            activate:
              - v4
              - v6
            as: 65501
            description: "BEJBEGIA"
            route_maps:
              - direction: in
                name: rm-REMOTE_SITES-in
              - direction: out
                name: rm-BEJBEGIA-out
          - neighbor_group: remotesites
            enabled: false
            peer: 10.10.49.18
            activate:
              - v4
            as: 65503
            description: "OTGKIT01"
          - neighbor_group: remotesites
            enabled: false
            peer: 10.10.49.6
            activate:
              - v4
            as: 65511
            description: "BELPMMOM"
          - neighbor_group: remotesites
            enabled: false
            peer: 10.10.49.14
            activate:
              - v4
            as: 65512
            description: "BELPMDAD"
          - neighbor_group: remotesites
            enabled: false
            peer: 10.10.49.22
            activate:
              - v4
            as: 65513
            description: "BEZEDHVN"
          - neighbor_group: remotesites
            enabled: false
            peer: 10.10.49.26
            activate:
              - v4
            as: 65514
            description: "BEOKPDCOOR01"
          - neighbor_group: remotesites
            enabled: false
            peer: 10.10.49.30
            activate:
              - v4
            as: 65515
            description: "BELPMPAR"
          - neighbor_group: remotesites
            enabled: false
            peer: 10.10.49.34
            activate:
              - v4
            as: 65519
            description: "BELOKSTO"
  public:  # routing decisions are made here
    interfaces:
      loopback:
        ipv6:
          addresses:
            - 2001:678:1080:2100::1/128
        ipv4:
          addresses:
            - 10.48.32.1/32
      veth:
        - name: vthPubDef
          peer: vthDefault
          ipv6:
        - name: vthPubIfog
          peer: vthIfog
          ipv6:
        - name: vthPubLocix
          peer: vthLocix
          ipv6:
        - name: vthPubFogixp
          peer: vthFogixp
          ipv6:
        - name: vthPubKleyrex
          peer: vthKleyrex
          ipv6:
    routing:
      bgp:
        as: 65001
        router_id: 10.48.32.1
        redistribute:
          - connected
        neighbor_groups:
          - peer: veth-default
            soft_reconfiguration_inbound: true
            activate:
              - v4
              - v6
            timers:
              keepalive: 3
              hold: 9
            route_maps:
              - direction: in
                name: rm-to_veth
              - direction: out
                name: rm-veth_from_public
          - peer: veth-peering
            soft_reconfiguration_inbound: true
            activate:
              - v4
              - v6
            timers:
              keepalive: 3
              hold: 9
            route_maps:
              - direction: in
                name: rm-veth_from_peering
              - direction: out
                name: rm-to_veth
        neighbors:
          - neighbor_group: veth-default
            peer: vthPubDef
            as: 65000
            unnumbered: true
            description: "VETH - Default VRF"
          - neighbor_group: veth-peering
            peer: vthPubIfog
            as: 65002
            unnumbered: true
            description: "VETH - IFOG VRF"
          - neighbor_group: veth-peering
            peer: vthPubLocix
            as: 65003
            unnumbered: true
            description: "VETH - LOCIX"
          - neighbor_group: veth-peering
            peer: vthPubFogixp
            as: 65004
            unnumbered: true
            description: "VETH - FOGIXP"
          - neighbor_group: veth-peering
            peer: vthPubKleyrex
            as: 65005
            unnumbered: true
            description: "VETH - KLEYREX"
  ifog:  # peering vrf
    interfaces:
      loopback:
        ipv6:
          addresses:
            - 2001:678:1080:2100::2/128
        ipv4:
          addresses:
            - 10.48.32.2/32
      physicals:
        - name: "ens18"
          description: "TRNS - IFOG"
          ipv6:
            gateway: 2a0c:9a40:1::1  # creates ::/0 - to redistribute downstream
            addresses:
              - 2a0c:9a40:1::1207/48
          ipv4:
            gateway: 193.148.249.1  # creates 0.0.0.0/0
            addresses:
              - 193.148.249.172/24
      veth:
        - name: vthIfog
          peer: vthPubIfog
          ipv6:
    routing:
      static:
        - destination: 192.0.0.1/32
          type: blackhole
      bgp:
        as: 211184
        router_id: 193.148.249.172
        redistribute:
          - connected
          - kernel
        neighbor_groups:
          - peer: veth-public
            soft_reconfiguration_inbound: true
            local_as: 65002
            activate:
              - v4
              - v6
            timers:
              keepalive: 3
              hold: 9
            route_maps:
              - direction: in
                name: rm-to_veth
              - direction: out
                name: rm-veth_from_peering
          - peer: transit
            soft_reconfiguration_inbound: true
            local_role: customer
            activate:
              - v6
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-DEFAULT_ONLY_PUBLIC
              - direction: out
                name: rm-AS211184-exact
        neighbors:
          - neighbor_group: veth-public
            peer: vthIfog
            as: 65001
            unnumbered: true
            description: "VETH - Public VRF"
          - neighbor_group: transit
            peer: 2a0c:9a40:1::1
            as: 34927
            description: "TRNS - Ifog"
  locix:  # IX vrf
    interfaces:
      loopback:
        ipv6:
          addresses:
            - 2001:678:1080:2100::3/128
        ipv4:
          addresses:
            - 10.48.32.3/32
      physicals:
        - name: "ens19"
          description: "IX - LOCIX"
          ipv6:
            addresses:
              - 2001:7f8:f2:e1::21:2284:1/64
          ipv4:
            addresses:
              - 185.1.167.89/23
      veth:
        - name: vthLocix
          peer: vthPubLocix
          ipv6:
    routing:
      static:
        - destination: 192.0.0.1/32
          type: blackhole
      bgp:
        as: 211184
        router_id: 185.1.167.89
        redistribute:
          - connected
          - kernel
        neighbor_groups:
          - peer: veth-public
            soft_reconfiguration_inbound: true
            local_as: 65003
            activate:
              - v4
              - v6
            timers:
              keepalive: 3
              hold: 9
            route_maps:
              - direction: in
                name: rm-to_veth
              - direction: out
                name: rm-deny  # rm-veth_from_peering
          - peer: route-servers
            enabled: false
            soft_reconfiguration_inbound: true
            as: 202409
            local_role: rs-client
            activate:
              - v6
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-DEFAULT_ONLY_PUBLIC
              - direction: out
                name: rm-deny  # rm-AS211184-exact
          - peer: peers
            enabled: false
            soft_reconfiguration_inbound: true
            local_role: peer
            activate:
              - v6
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-DEFAULT_ONLY_PUBLIC
              - direction: out
                name: rm-deny  # rm-AS211184-exact
        neighbors:
          - neighbor_group: veth-public
            peer: vthLocix
            as: 65001
            unnumbered: true
            description: "VETH - Public VRF"
          - neighbor_group: route-servers
            peer: 2001:7f8:f2:e1::babe:1
            description: "IX - Locix - RS1"
          - neighbor_group: route-servers
            peer: 2001:7f8:f2:e1::dead:1
            description: "IX - Locix - RS1"
          - neighbor_group: route-servers
            peer: 2001:7f8:f2:e1::be5a
            description: "IX - Locix - RS1"
          - neighbor_group: peers
            as: 6939
            peer: 2001:7f8:f2:e1::6939:1
            local_role: customer
            description: "PEER - HE"
  fogixp:  # IX vrf
    interfaces:
      loopback:
        ipv6:
          addresses:
            - 2001:678:1080:2100::4/128
        ipv4:
          addresses:
            - 10.48.32.4/32
      physicals:
        - name: "ens20"
          description: "IX - FogIXP"
          ipv6:
            addresses:
              - 2001:7f8:ca:1::21:1184:1/64
      veth:
        - name: vthFogixp
          peer: vthPubFogixp
          ipv6:
    routing:
      static:
        - destination: 192.0.0.1/32
          type: blackhole
      bgp:
        as: 211184
        router_id: 185.1.147.45
        redistribute:
          - connected
          - kernel
        neighbor_groups:
          - peer: veth-public
            soft_reconfiguration_inbound: true
            local_as: 65004
            activate:
              - v4
              - v6
            timers:
              keepalive: 3
              hold: 9
            route_maps:
              - direction: in
                name: rm-to_veth
              - direction: out
                name: rm-veth_from_peering
          - peer: route-servers
            soft_reconfiguration_inbound: true
            as: 47498
            local_role: rs-client
            activate:
              - v6
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-DEFAULT_ONLY_PUBLIC
              - direction: out
                name: rm-AS211184-exact
        neighbors:
          - neighbor_group: veth-public
            peer: vthFogixp
            as: 65001
            unnumbered: true
            description: "VETH - Public VRF"
          - neighbor_group: route-servers
            peer: 2001:7f8:ca:1::111
            description: "IX - Fogixp - RS1"
          - neighbor_group: route-servers
            peer: 2001:7f8:ca:1::222
            description: "IX - Fogixp - RS2"
  kleyrex:  # IX vrf
    interfaces:
      loopback:
        ipv6:
          addresses:
            - 2001:678:1080:2100::5/128
        ipv4:
          addresses:
            - 10.48.32.5/32
      physicals:
        - name: "ens21"
          description: "IX - KleyReX" 
          ipv6:
            addresses:
              - 2001:7f8:33::a121:1184:1/64
          ipv4:
            addresses:
              - 193.189.83.6/23 
      veth:
        - name: vthKleyrex
          peer: vthPubKleyrex
          ipv6:
    routing:
      static:
        - destination: 192.0.0.1/32
          type: blackhole
      bgp:
        as: 211184
        router_id: 193.189.83.6
        redistribute:
          - connected
          - kernel
        neighbor_groups:
          - peer: veth-public
            soft_reconfiguration_inbound: true
            local_as: 65005
            activate:
              - v4
              - v6
            timers:
              keepalive: 3
              hold: 9
            route_maps:
              - direction: in
                name: rm-to_veth
              - direction: out
                name: rm-veth_from_peering
          - peer: route-servers
            soft_reconfiguration_inbound: true
            as: 31142
            local_role: rs-client
            activate:
              - v6
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-DEFAULT_ONLY_PUBLIC
              - direction: out
                name: rm-AS211184-exact
          - peer: transit
            soft_reconfiguration_inbound: true
            local_role: customer
            activate:
              - v6
            timers:
              keepalive: 20
              hold: 60
            route_maps:
              - direction: in
                name: rm-TRNS_HE-in
              - direction: out
                name: rm-AS211184-exact
          # - peer: peers
          #   soft_reconfiguration_inbound: true
          #   local_role: peer
          #   activate:
          #     - v6
          #   timers:
          #     keepalive: 20
          #     hold: 60
          #   route_maps:
          #     - direction: in
          #       name: rm-DEFAULT_ONLY_PUBLIC
          #     - direction: out
          #       name: rm-deny  # rm-AS211184-exact
        neighbors:
          - neighbor_group: veth-public
            peer: vthKleyrex
            as: 65001
            unnumbered: true
            description: "VETH - Public VRF"
          - neighbor_group: transit
            as: 6939
            peer: 2001:7f8:33::a100:6939:1
            description: "IX - Kleyrex - HE"
          - neighbor_group: route-servers
            peer: 2001:7f8:33::a103:1142:1
            description: "IX - Kleyrex - RS1"
          - neighbor_group: route-servers
            peer: 2001:7f8:33::a103:1142:2
            description: "IX - Kleyrex - RS2"
          - neighbor_group: route-servers
            peer: 2001:7f8:33::a103:1142:3
            description: "IX - Kleyrex - RS3"

prefix_lists_host: 
  - name: pl-LO_VETH
    lists:
      - prefix: 10.48.0.1/32
      - prefix: 10.48.32.0/30
        ge: 32
      - prefix: 2001:678:1080:2100::/64
        ge: 128

route_filtering:
  prefix_lists: "{{ prefix_lists_all + prefix_lists_host }}"
  route_maps:
    - name: rm-TRNS_HE-in
      maps:
        - action:
            set:
              large_communities:
                - TRNS_HE
            on_match: next
        - action:
            call: rm-comm-IFOG
            on_match: next
        - action:
            call: rm-comm-KLEYREX
            on_match: next
        - action:
            call: rm-DEFAULT_ONLY_PUBLIC
    - name: rm-TRNS_HE-out
      maps:
        - action:
            set:
              large_communities:
                - IXP_Kleyrex
            on_match: next
        - action:
            call: rm-comm-IFOG
        - action:
            call: rm-AS211184-exact
    - name: rm-comm-IFOG
      maps:
        - action:
            set:
              large_communities:
                - COUNTRY_DE-Germany
            on_match: next
        - action:
            set:
              large_communities:
                - CITY_DE-Frankfurt
            on_match: next
        - action:
            set:
              large_communities:
                - POP_Ifog
            on_match: next
    - name: rm-comm-KLEYREX
      maps:
        - action:
            set:
              large_communities:
                - IXP_Kleyrex
            on_match: next
    - name: rm-DEFAULT_ONLY_PUBLIC
      maps:
        - match:
            v4_prefix_list: pl-default-public
        - match:
            v6_prefix_list: pl-default-public
    - name: rm-AS211184-exact
      maps:
        - match:
            v6_prefix_list: pl-AS211184-exact
    - name: rm-REMOTE_SITES-in
      maps:
        - match:
            v6_prefix_list: pl-AS211184
        - match:
            v4_prefix_list: pl-RFC1918
    - name: rm-REMOTE_SITES-out
      maps:
        - match:
            v6_prefix_list: pl-AS211184-remotesites
        - match:
            v4_prefix_list: pl-MGMT
        - match:
            v4_prefix_list: pl-MONITORING
        - match:
            v4_prefix_list: pl-NETWORKING
    - name: rm-DC-out
      maps:
        - match:
            v4_prefix_list: pl-RFC1918
        - match:
            v6_prefix_list: pl-AS211184
        - match:
            v6_prefix_list: pl-default
    - name: rm-BEJBEGIA-out
      maps:
        - match:
            v4_prefix_list: pl-DEFRAIFG
        - match:
            v6_prefix_list: pl-AS211184-remotesites
        - match:
            v6_prefix_list: pl-default
    - name: rm-veth_from_peering
      maps:
        - match:
            v6_prefix_list: pl-LO_VETH
        - match:
            v6_prefix_list: pl-default-public
        - match:
            v6_prefix_list: pl-default
        - match:
            v4_prefix_list: pl-LO_VETH
        - match:
            v4_prefix_list: pl-default
    - name: rm-veth_from_public
      maps:
        - match:
            v6_prefix_list: pl-LO_VETH
        - match:
            v6_prefix_list: pl-default
        - match:
            v4_prefix_list: pl-LO_VETH
        - match:
            v4_prefix_list: pl-default
    - name: rm-to_veth
      maps:
        - match:
            v4_prefix_list: pl-RFC1918
        - match:
            v6_prefix_list: pl-AS211184
    - name: rm-all
      maps:
        - match:
            v6_prefix_list: pl-default
          policy: permit
        - match:
            v4_prefix_list: pl-default
          policy: permit
    - name: rm-deny
      maps:
        - policy: deny